---
layout: post
title:  swift Strings and Characters
categories: swift
keywords: swift
---

 String æ˜¯ Character çš„åºåˆ—ã€‚String ç”±è‹¥å¹²**ç¼–ç æ–¹å¼æ— å…³ (encoding-independent)** çš„ Unicode character ç»„æˆã€‚  
 
## String Literals
1. å­—ç¬¦ä¸²å­—é¢é‡æ˜¯ç”±åŒå¼•å· `"` åŒ…è£¹çš„å­—ç¬¦ã€‚   

        let someString = "Some string literal value"
2. å¤šè¡Œå­—ç¬¦ä¸²å¯ä»¥ç”¨ä¸‰ä¸ªåŒå¼•å·åŒ…è£¹ã€‚  

        let threeDoubleQuotes = """
        Escaping the first quote \"""
        Escaping all three quotes \"\"\"
        """
1. è¢«ä¸‰ä¸ªåŒå¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²ï¼Œä»ä¸‰å¼•å·çš„ä¸‹ä¸€è¡Œå¼€å§‹ï¼Œåˆ°ç»“æŸä¸‰å¼•å·çš„ä¸Šä¸€è¡Œç»“æŸã€‚ä¸åŒ…æ‹¬å¤´å°¾çš„æ¢è¡Œç¬¦ã€‚  
    
        let singleLineString = "These are the same."
        let multilineString = """
        These are the same.
        """
1. ä¸‰å¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²ï¼Œç»“æŸå¼•å·ä¹‹å‰çš„ç©ºæ ¼è¢«å¿½ç•¥ã€‚

    ![-w516](http://oda58fqub.bkt.clouddn.com/15019336645015.jpg)

## åˆå§‹åŒ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²  
    var emptyString = ""               // empty string literal
    var anotherEmptyString = String()  // initializer syntax
    // these two strings are both empty, and are equivalent to each other  
    
## String æ˜¯å€¼ç±»å‹ (value type)  
1. String ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œä¼šè¢«å¤åˆ¶ä¸€ä»½ã€‚åŸå§‹çš„å­—ç¬¦ä¸²ä¸ä¼šè¢«ä¼ é€’ã€‚  
2. Swift è¯­è¨€ä¿è¯åªæœ‰åœ¨éœ€è¦è¢«å¤åˆ¶æ—¶ï¼Œæ‰ä¼šå¤åˆ¶ä¸€éå­—ç¬¦ä¸²çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒæ€§èƒ½é—®é¢˜ã€‚  

## å¤„ç†å­—ç¬¦  
1. `for-in` å¾ªç¯    

        for character in "Dog!ğŸ¶" {
            print(character)
        }
        // D
        // o
        // g
        // !
        // ğŸ¶
2. å£°æ˜ä¸€ä¸ªå­—ç¬¦  
    
        let exclamationMark: Character = "!"
3. é€šè¿‡å­—ç¬¦æ•°ç»„åˆ›å»ºå­—ç¬¦ä¸²  
        
        let catCharacters: [Character] = ["C", "a", "t", "!", "ğŸ±"]
        let catString = String(catCharacters)
        print(catString)
        // Prints "Cat!ğŸ±"

## è¿æ¥å­—ç¬¦å’Œå­—ç¬¦ä¸²
1. `+` è¿æ¥  
    
        let string1 = "hello"
        let string2 = " there"
        var welcome = string1 + string2
        // welcome now equals "hello there"
2. append å‡½æ•°ï¼ŒæŠŠå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²åŠ åˆ°åé¢  
    
        let exclamationMark: Character = "!"
        welcome.append(exclamationMark)
        // welcome now equals "hello there!"

## String Interpolation  
æŠŠå˜é‡ä½œä¸ºå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚  

    let multiplier = 3
    let message = "\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"
    // message is "3 times 2.5 is 7.5"

## Unicode Scalars  
å’Œ Unicode code point ä¸åŒï¼ŒUnicode scalar ä¸åŒ…æ‹¬ `U+D800` åˆ° `U+DFFF` è¿™ä¸€éƒ¨åˆ† Unicode code pointã€‚è¿™äº›å«åš â€œUnicode surrogate pair code pointsâ€ã€‚  
## ç‰¹æ®Šçš„å­—ç¬¦ 
1. `\0`ã€æ¢è¡Œç¬¦ã€åˆ¶è¡¨ç¬¦ã€å•å¼•å·ã€åŒå¼•å·ã€åæ–œæ   
2. `\u{n}` å½¢å¼ã€‚å…¶ä¸­ `n` æ•°å­—ã€‚è¿™ç§å¯ä»¥æ•°å­—æ–¹å¼è¡¨ç¤º Unicode å­—ç¬¦ã€‚  
    
        let wiseWords = "\"Imagination is more important than knowledge\" - Einstein"
        // "Imagination is more important than knowledge" - Einstein
        let dollarSign = "\u{24}"        // $,  Unicode scalar U+0024
        let blackHeart = "\u{2665}"      // â™¥,  Unicode scalar U+2665
        let sparklingHeart = "\u{1F496}" // ğŸ’–, Unicode scalar U+1F496
    

## Extended Grapheme Clusters  
è¿™ä¸ªè¯çš„æ„æ€æ˜¯ä¸€ä¸ªæˆ–å‡ ä¸ª Unicode scalarï¼Œä»£è¡¨ä¸€ä¸ªå¯ä»¥è¢«äººè¯»çš„å­—ç¬¦ã€‚åœ¨ Swift ä¸­ï¼Œä¸€ä¸ª Character æ˜¯ä¸€ä¸ª extended grapheme clusterã€‚ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚  
  
1. åœ¨äººç±»çœ‹èµ·æ¥å¯è¯»çš„å­—ç¬¦ï¼Œå¯èƒ½æœ‰å‡ ç§ä¸åŒçš„è¡¨ç¤ºæ–¹å¼  
    
        let eAcute: Character = "\u{E9}"                         // Ã©
        let combinedEAcute: Character = "\u{65}\u{301}"          // e followed by Ì
        // eAcute is Ã©, combinedEAcute is eÌ  
        
    ä¸Šé¢è¿™ä¸ªä¾‹å­è¯´æ˜ï¼Œåœ¨ Swift ä¸­ï¼Œä¸€ä¸ª Character ä¸ä¸€å®šåªæœ‰ä¸€ä¸ª Unicode Scalarã€‚  
1.  å¯ä»¥è®©å‡ ä¸ªå­—ç¬¦ç»„åˆä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦ã€‚å¦‚å¸¦åœˆçš„æ–‡å­—  
    
        let enclosedEAcute: Character = "\u{E9}\u{20DD}"
        // enclosedEAcute is Ã©âƒ  
1. å’Œåœ°åŒºã€å›½å®¶ç›¸å…³çš„ç¬¦å·ï¼Œä¹Ÿå¾€å¾€ç”±å¤šä¸ª Unicode scalar è¡¨ç¤ºã€‚  
    
        let regionalIndicatorForUS: Character = "\u{1F1FA}\u{1F1F8}"
        // regionalIndicatorForUS is ğŸ‡ºğŸ‡¸


## å­—ç¬¦è®¡æ•°  
ä½¿ç”¨ `count` å±æ€§ã€‚ä½¿ç”¨æ—¶è¦æ³¨æ„ï¼Œè¿™ä¸ªå±æ€§ä¼šéå†ä¸€éå­—ç¬¦ä¸²ï¼Œå¯èƒ½ä¼šæ¯”è¾ƒæ…¢ã€‚  

    let unusualMenagerie = "Koala ğŸ¨, Snail ğŸŒ, Penguin ğŸ§, Dromedary ğŸª"
    print("unusualMenagerie has \(unusualMenagerie.count) characters")
    // Prints "unusualMenagerie has 40 characters"

ç”±äºæ¯ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ª â€œextended grapheme clusterâ€ï¼Œå› æ­¤å¯¹å­—ç¬¦ä¸²åšè¿æ¥æˆ–ä¿®æ”¹æ“ä½œï¼Œä¸ä¸€å®šä¼šæ”¹å˜å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚

    var word = "cafe"
    print("the number of characters in \(word) is \(word.count)")
    // Prints "the number of characters in cafe is 4"
     
    word += "\u{301}"    // COMBINING ACUTE ACCENT, U+0301
     
    print("the number of characters in \(word) is \(word.count)")
    // Prints "the number of characters in cafeÌ is 4"

    
## è¯»å–å’Œæ”¹å˜å­—ç¬¦ä¸²  
### String Indices  
å­—ç¬¦ä¸²æœ‰ä¸€ä¸ªç´¢å¼•ç±»å‹ï¼Œå«åš `String.Index`ï¼Œç”¨æ¥æè¿°æ¯ä¸ªå­—ç¬¦å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ã€‚  
ç”±äºä¸€ä¸ªå­—ç¬¦å æ®çš„å†…å­˜ç©ºé—´ä¸åŒï¼Œå› æ­¤ç¡®å®šå­—ç¬¦ä¸²çš„ç¬¬å‡ ä¸ªå­—ç¬¦æ˜¯ä»€ä¹ˆï¼Œå¿…é¡»éå†ä¸€éå­—ç¬¦ä¸²ï¼Œä¹Ÿä¸èƒ½ç”¨æ•´æ•°æ¥ç´¢å¼•å­—ç¬¦ä¸²ã€‚    

1. ä½¿ç”¨ `startIndex` æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ã€‚ç”¨ `endIndex`æ¥è¡¨ç¤ºæœ€åä¸€ä¸ªå­—ç¬¦ä¹‹åçš„ä½ç½®ã€‚å¯¹äºç©ºå­—ç¬¦ä¸²æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå±æ€§ç›¸åŒã€‚  
1. ä½¿ç”¨ `index(before:) ` å’Œ `index(after:) ` æ–¹æ³•æ¥è¡¨ç¤ºæŸä¸ªå­—ç¬¦ä½ç½®ä¹‹å‰æˆ–ä¹‹åçš„ä½ç½®ã€‚  
2. ä½¿ç”¨ `index(_:offsetBy:)` æ–¹æ³•æ¥è·å–æ¯”è¾ƒè¿œçš„ä½ç½®  
3. è¶Šç•Œä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯  

        let greeting = "Guten Tag!"
        greeting[greeting.startIndex]
        // G
        greeting[greeting.index(before: greeting.endIndex)]
        // !
        greeting[greeting.index(after: greeting.startIndex)]
        // u
        let index = greeting.index(greeting.startIndex, offsetBy: 7)
        greeting[index]
        // a
        greeting[greeting.endIndex] // Error
        greeting.index(after: greeting.endIndex) // Error
        
        
                
### Inserting and Removing       
1. æ’å…¥æ–¹æ³•  
    
        var welcome = "hello"
        welcome.insert("!", at: welcome.endIndex)
        // welcome now equals "hello!"
         
        welcome.insert(contentsOf: " there", at: welcome.index(before: welcome.endIndex))
        // welcome now equals "hello there!"
2. ç§»é™¤æ–¹æ³•  
    
        welcome.remove(at: welcome.index(before: welcome.endIndex))
        // welcome now equals "hello there"
         
        let range = welcome.index(welcome.endIndex, offsetBy: -6)..<welcome.endIndex
        welcome.removeSubrange(range)
        // welcome now equals "hello"
        
    
### å­å­—ç¬¦ä¸²
Swift æœ‰ä¸€ä¸ªç±»å‹å«åš `Substring`ï¼Œä½¿ç”¨ä¸‹æ ‡è®¿é—®æˆ–è€… `prefix(_:)` ç±»ä¼¼æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ª `Substring` ç±»å‹ã€‚  
 `Substring` ç±»å‹å’Œ `String` ç±»å‹æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯ä¸€èˆ¬ç”¨äºä¸´æ—¶å¤„ç†ã€‚åœ¨å¤„ç†å®Œæ¯•ä¹‹åï¼Œè¦è½¬ä¸º `String` ç±»å‹ã€‚  

    let greeting = "Hello, world!"
    let index = greeting.index(of: ",") ?? greeting.endIndex
    let beginning = greeting[..<index]
    // beginning is "Hello"
     
    // Convert the result to a String for long-term storage.
    let newString = String(beginning)
`Substring` ç±»å‹å’Œ `String` ç±»å‹çš„å†…å­˜å¤„ç†æ–¹å¼ä¸åŒã€‚ `Substring` ç±»å‹å¯ä»¥é‡å¤åˆ©ç”¨åŸå­—ç¬¦ä¸²çš„å†…å­˜ç©ºé—´ï¼Œä»è€Œä¼˜åŒ–äº†æ€§èƒ½ã€‚   
    ![-w600](http://oda58fqub.bkt.clouddn.com/15019404550105.jpg)  
    
## æ¯”è¾ƒå­—ç¬¦ä¸²  

ä½¿ç”¨ `==` å’Œ `!=` æ¥è¡¨ç¤ºç­‰äºå’Œä¸ç­‰äºã€‚  
æ¯”è¾ƒå­—ç¬¦ä¸²ç›¸ç­‰æ—¶ï¼Œæ˜¯æŒ‡ extended grapheme clusters æ˜¯å¦ç›¸ç­‰ã€‚extended grapheme clusters æ˜¯å¦ç›¸ç­‰æ˜¯æŒ‡åœ¨è¯­è¨€å­¦æ„ä¹‰ä¸Šï¼Œæ˜¯å¦ç›¸ç­‰ï¼Œå³ä½¿ä»–ä»¬æ˜¯ç”¨ä¸åŒçš„ Unicode scalar è¡¨ç¤ºçš„ã€‚  

    // "Voulez-vous un cafÃ©?" using LATIN SMALL LETTER E WITH ACUTE
    let eAcuteQuestion = "Voulez-vous un caf\u{E9}?"
     
    // "Voulez-vous un cafeÌ?" using LATIN SMALL LETTER E and COMBINING ACUTE ACCENT
    let combinedEAcuteQuestion = "Voulez-vous un caf\u{65}\u{301}?"
     
    if eAcuteQuestion == combinedEAcuteQuestion {
        print("These two strings are considered equal")
    }
    // Prints "These two strings are considered equal"

æœ‰äº›å­—æ¯çœ‹èµ·æ¥ä¸€æ ·ï¼Œä½†æ˜¯è¯­è¨€å­¦æ„ä¹‰ä¸ä¸€æ ·ã€‚å¦‚è‹±æ–‡å­—æ¯ `A` å’Œä¿„è¯­å­—æ¯ `Ğ`ã€‚  

    let latinCapitalLetterA: Character = "\u{41}"
     
    let cyrillicCapitalLetterA: Character = "\u{0410}"
     
    if latinCapitalLetterA != cyrillicCapitalLetterA {
        print("These two characters are not equivalent.")
    }
    // Prints "These two characters are not equivalent."
    
### ä½¿ç”¨ `hasSuffix(_:)` å’Œ `hasPrefix(_:)` æ¯”è¾ƒå‰åç¼€  

    let romeoAndJuliet = [
        "Act 1 Scene 1: Verona, A public place",
        "Act 1 Scene 2: Capulet's mansion",
        "Act 1 Scene 3: A room in Capulet's mansion",
        "Act 1 Scene 4: A street outside Capulet's mansion",
        "Act 1 Scene 5: The Great Hall in Capulet's mansion",
        "Act 2 Scene 1: Outside Capulet's mansion",
        "Act 2 Scene 2: Capulet's orchard",
        "Act 2 Scene 3: Outside Friar Lawrence's cell",
        "Act 2 Scene 4: A street in Verona",
        "Act 2 Scene 5: Capulet's mansion",
        "Act 2 Scene 6: Friar Lawrence's cell"
    ]
    
    var act1SceneCount = 0
    for scene in romeoAndJuliet {
        if scene.hasPrefix("Act 1 ") {
            act1SceneCount += 1
        }
    }
    print("There are \(act1SceneCount) scenes in Act 1")
    // Prints "There are 5 scenes in Act 1"


## Unicode è¡¨ç¤ºæ–¹æ³•  

    let dogString = "Dogâ€¼ğŸ¶"

1. UTF-8 è¡¨ç¤ºæ³•  

    ![](http://oda58fqub.bkt.clouddn.com/15019413931086.png)
    
        for codeUnit in dogString.utf8 {
            print("\(codeUnit) ", terminator: "")
        }
        print("")
        // Prints "68 111 103 226 128 188 240 159 144 182 "
    
1. UTF-16 è¡¨ç¤ºæ³•  
    
    ![](http://oda58fqub.bkt.clouddn.com/15019414478431.png)

		for codeUnit in dogString.utf16 {
		    print("\(codeUnit) ", terminator: "")
		}
		print("")
		// Prints "68 111 103 8252 55357 56374 "

1. Unicode Scalar è¡¨ç¤ºæ³• 

    ![](http://oda58fqub.bkt.clouddn.com/15019415815959.png)

        for scalar in dogString.unicodeScalars {
            print("\(scalar.value) ", terminator: "")
        }
        print("")
        // Prints "68 111 103 8252 128054 "



