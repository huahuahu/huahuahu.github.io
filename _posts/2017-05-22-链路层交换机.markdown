---
title: 链路层交换机   
categories: network  
tag:    
- 链路层

---

在总线拓扑和基于**集线器**的星形拓扑技术时代，以太网显然是一种**广播链路**。为了处理这些碰撞，以太网标准包括了 CSMA/CD 协议。  
今天广为使用的以太网是基于**交换机**的星形拓扑，采用的是**存储转发分组交换**。在基于交换机的以太局域网中，不会有碰撞，因此没有必要使用 MAC 协议了！  
交换机自身对子网中的主机和路由器是**透明的 (transparent)**，即某主机/路由器向另一个主机/路由器寻址一个帧，而不是向交换机寻址该帧；且不知道某交换机将会接收该帧并将它转发到另一个结点。  
类似路由器接口为数据报设有缓存，交换机的输出端口设有缓存。  
## 一、交换机的转发和过滤  
- **过滤 (filtering)**  
    决定一个帧应该转发到某个接口还是应当将其丢弃。  
- **转发 (forwarding)**  
    决定一个帧应该被导向那个接口，并把该帧移动到那些接口。  

交换机的过滤和转发借助于**交换机表 (switch table)** 完成。交换机转发分组基于 MAC 地址，而不是 IP 地址。    
![-w500](http://oda58fqub.bkt.clouddn.com/14954616954219.jpg)  
假定目的地址为`DD-DD-DD-DD-DD-DD`的帧从交换机接口 x 到达，那么交换机用这个地址来索引它的表。有 3 种可能情况：  

1. 没有对应的表项    
    交换机向**除接口 x 的所有接口**前面的输出缓存转发该帧副本，即广播该帧。
2. 有一个表项将地址与接口 x 联系起来    
    表示该帧从包括适配器`DD-DD-DD-DD-DD-DD`的网段到来，只需丢弃该帧即可。
3. 有一个表项将地址与接口 y≠x 联系起来  
    需要转发。交换机将该帧放到接口 y 前面的输出缓存完成这个功能。  

## 二、交换机自学习过程  
交换机表是**自动、动态和自治**地建立起来的，即不需要来自网络管理员或配置协议的任何干预。  

1. 交换机表初始为空。
2. 对于每个接口接收到的每个入帧，将在交换机表中留下相应记录。  
3. 经过一段时间 (aging time) 后，交换机没有收到来自以该地址作为**源地址**的帧，就在表中删除这个地址。  

## 三、链路层交换机的性质  
1. 消除碰撞    
    交换机缓存帧并不会在网段上同时传输多余一个帧，因此没有因碰撞而浪费的带宽。交换机提供了比广播链路局域网高得多的性能改善。
2. 异质的链路    
    交换机将链路彼此隔离，因此局域网中的不同链路能够以不同的速率运行并且能在不同的媒体上运行。
3. 管理  
    交换机可以提供强化的安全性，并且易于进行网络管理。  

## 四、交换机的安全性  
1. 降低了嗅探的风险  
    主机 A 向主机 B 发送帧时，由于交换机仅向主机 B 转发该帧。在另一个子网中的主机 C 不能嗅探到该帧。  
2. 交换机毒化 (switch poisoning)  
    向交换机发送大量具有不同伪造源 MAC 地址的分组，因而用伪造表项填满了交换机表，没有为合法主机留下空间。这使得**交换机广播大多数帧**，从而被嗅探器俘获到。  

## 五、交换机和路由器  
![-w500](http://oda58fqub.bkt.clouddn.com/14954627462755.jpg)    
  