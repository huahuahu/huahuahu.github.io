---
title: TCP/IP协议之ARP: 地址解析协议 
categories: network  
tag:    
- tcp/ip
---
  
## 一、作用  
![](http://oda58fqub.bkt.clouddn.com/14892031204495.jpg)

ARP为IP地址到对应硬件地址之间提供动态映射。这里动态是指这个过程是自动完成的，不需要程序用户或系统管理员关心。  

## 二、查看ARP高速缓存  
![](http://oda58fqub.bkt.clouddn.com/14892451259283.jpg)

## 三、ARP分组格式  
![](http://oda58fqub.bkt.clouddn.com/14892452368254.jpg)  

1. 首部两字段是以太网的源地址和目的地址。 目的地址全是1表示广播地址，所有以太网接口都要接受广播数据帧。  
2. 对于ARP请求来说，帧类型是0x0806  
3. 硬件类型为1表示以太网地址。  
4. 协议类型为0x0800表示是IP地址。  
5. 对于以太网上IP地址的ARP请求，硬件地址长度是6，表示MAC地址是6字节。  
6. 对于以太网上IP地址的ARP请求，协议地址长度是4，表示IP地址是4字节。  
7. op字段。  
    8. ARP请求值为1  
    9. ARP应答值为2  
    10. RARP请求值为3  
    11. RARP应答值为4  
8. 发送端硬件地址  
9. 发送端IP地址  
10. 目的端硬件地址  
11. 目的端协议地址  

## 四、ARP代理  
如果ARP请求是从一个网络的主机到另一个网络的主机，那么连接这两个网络的路由器就可以回答该请求，这个过程称为委托ARP或ARP代理 (Proxy ARP)。可以让这个主机误以为路由器就是它的主机，从而把分组发给路由器，由路由器代为转发。  
## 五、免费ARP (gratuitous ARP)  
主机发送ARP查找自己的IP地址，有两个作用：

1. 确定另一个主机是否设置了相同的IP地址  
2.  如果发送免费ARP的主机正好改变了硬件地址，那么这个分组可以使其他主机告诉缓存中旧的硬件地址进行相应的更新。



